卡尔曼滤波

# 一 学习任务

## 1 思路步骤

卡尔曼滤波是一种用于估计动态系统状态的最优估计算法，其基本思路可以概括为以下几个关键步骤：

预测阶段

- 根据系统的动态模型，基于上一时刻的最优估计值，对当前时刻的状态进行预测。
- 同时，根据系统的不确定性和噪声特性，预测估计误差的协方差。

测量更新阶段

- 将预测值与实际测量值进行比较。
- 通过计算卡尔曼增益，权衡预测值和测量值的可信度。
- 基于卡尔曼增益，对预测值进行修正，得到更准确的当前时刻状态估计值。
- 更新估计误差的协方差。



## 2卡尔曼滤波的核心公式

卡尔曼滤波主要包括以下五个核心公式和步骤：

预测步骤：

1. 状态预测：x_k^- = Ax_(k - 1) + Bu_(k - 1)
   - 变量含义：
     - x_k^-：表示 k 时刻的先验状态估计值。
     - A：状态转移矩阵。
     - x_(k - 1)：k - 1 时刻的后验状态估计值。
     - B：控制输入矩阵。
     - u_(k - 1)：k - 1 时刻的控制输入。
2. 协方差预测：P_k^- = AP_(k - 1)A^T + Q
   - 变量含义：
     - P_k^-：k 时刻的先验估计误差协方差矩阵。
     - P_(k - 1)：k - 1 时刻的后验估计误差协方差矩阵。
     - Q：过程噪声协方差矩阵。

更新步骤：

1. 卡尔曼增益计算：K_k = P_k^-H^T(HP_k^-H^T + R)^(-1)
   - 变量含义：
     - K_k：k 时刻的卡尔曼增益。
     - H：观测矩阵。
     - R：测量噪声协方差矩阵。
2. 状态更新：x_k = x_k^- + K_k(z_k - Hx_k^-)
   - 变量含义：
     - x_k：k 时刻的后验状态估计值。
     - z_k：k 时刻的测量值。
3. 协方差更新：P_k = (I - K_kH)P_k^-
   - 变量含义：
     - P_k：k 时刻的后验估计误差协方差矩阵。
     - I：单位矩阵。

​    整个卡尔曼滤波过程通过不断重复这两个步骤，实现对系统状态的最优估计。

​    例如，在车辆追踪的应用中，x_k 可以表示车辆在 k 时刻的位置和速度，z_k 是通过传感器获取的车辆位置测量值，通过卡尔曼滤波可以更准确地估计车辆的状态。

## 3 数据融合

​       在卡尔曼滤波中，数据融合是指将来自不同来源、具有不同精度和不确定性的测量数据，通过一定的算法和规则进行综合处理，以获得更准确、更可靠的系统状态估计。

具体来说，卡尔曼滤波中的数据融合过程主要体现在以下几个方面：

1. 融合不同时刻的测量数据：卡尔曼滤波利用系统的动态模型，结合过去的测量值和当前的测量值，来估计当前系统的状态。通过这种方式，将时间序列上的测量数据进行了有效的融合。
2. 融合多个测量变量：如果系统有多个相关的测量变量，卡尔曼滤波可以同时处理这些变量，并综合考虑它们对系统状态估计的贡献。
3. 融合不同精度的测量数据：在实际应用中，可能会有不同精度的传感器或测量手段获取关于系统状态的信息。卡尔曼滤波通过计算卡尔曼增益，根据测量数据的精度和可靠性，合理地分配权重，从而实现不同精度测量数据的融合。

​       通过数据融合，卡尔曼滤波能够充分利用各种测量信息，降低测量噪声和不确定性的影响，提高对系统状态估计的准确性和可靠性。

## 4协方差矩阵

​     在卡尔曼滤波中，协方差矩阵起着至关重要的作用。

主要有以下两个关键的协方差矩阵：

1. 过程噪声协方差矩阵 
   - 它描述了系统模型本身的不确定性和噪声特性。
   - 例如，如果所研究的系统是一个移动的车辆，车辆的动力学模型可能无法完全准确地描述实际的运动，其中的误差就由 来表示。
   - 假设车辆受到随机的风阻影响，这种难以精确建模的干扰就可以通过适当设置 的值来体现。
2. 测量噪声协方差矩阵 
   - 反映了测量值的不确定性和误差。
   - 比如在使用传感器测量温度时，由于传感器的精度限制、环境干扰等因素，测量结果存在一定的误差，这些误差的统计特性由 来描述。
   - 倘若使用的温度传感器的精度为 ±1℃，那么 的值就可以根据这种误差范围来设定。

另外，还有估计误差协方差矩阵：

1. 先验估计误差协方差矩阵 
   - 表示在获取新的测量值之前，对状态估计误差的估计。
   - 它是基于上一时刻的后验估计误差协方差矩阵和系统模型计算得到的。
2. 后验估计误差协方差矩阵 
   - 是在结合新的测量值更新状态估计后，对估计误差的重新评估。

正确设定和理解这些协方差矩阵对于卡尔曼滤波的性能和准确性至关重要。如果协方差矩阵的估计不准确，可能导致滤波结果的偏差或不稳定。

​     例如，在卫星导航系统中，如果对测量噪声协方差矩阵 的估计过小，会过度信任测量值，导致滤波结果对噪声敏感；反之，如果估计过大，会降低测量值在状态更新中的作用，使滤波收敛速度变慢。

## 5 状态空间方程和观测问题

卡尔曼滤波的状态空间方程包括：

状态方程： x_k = Ax_{k - 1} + Bu_{k - 1} + w_{k - 1}

其中：

- x_k 是 k 时刻的系统状态向量。
- A 是状态转移矩阵，描述了系统从 k - 1 时刻到 k 时刻的状态变化。
- B 是控制输入矩阵。
- u_{k - 1} 是控制输入向量。
- w_{k - 1} 是过程噪声向量，其协方差矩阵为 Q 。

观测方程： z_k = Hx_k + v_k

其中：

- z_k 是 k 时刻的观测向量。
- H 是观测矩阵，将状态向量映射到观测空间。
- v_k 是观测噪声向量，其协方差矩阵为 R 。

在观测方面，存在以下问题：

观测可能存在测量误差，比如在测量温度时，温度计的精度可能为 ±0.5℃。

噪声干扰也是常见的，例如在通信系统中，信号传输过程中的电磁干扰会使接收的观测数据出现噪声。

部分观测的情况也时有发生，对于一个复杂的机械系统，可能只能测量到某些关键部位的位移，而无法直接测量所有部件的运动状态。

​    为了解决这些观测问题，卡尔曼滤波通过结合状态方程的预测和观测方程的更新，来实现对系统状态的最优估计，从而在一定程度上减轻观测误差、噪声干扰和部分观测带来的不利影响。

​    假设我们要跟踪一个在空中飞行的无人机，通过 GPS 接收机获取其位置观测。由于 GPS 信号可能受到建筑物遮挡或多径效应的影响，导致观测存在误差和不确定性。此时，卡尔曼滤波就能利用无人机的动力学模型（状态方程）和有误差的 GPS 观测（观测方程），来准确估计无人机的真实位置和速度。

# 二 完成情况

对卡尔曼滤波的思路和步骤比较了解了 但在求卡尔曼滤波增益的推导公式那里还是没有太掌握

总的来说入门了解了卡尔曼滤波的思路和用法，但卡尔曼滤波的进一步的推导没有掌握

# 三学习中存在的问题

1 那些正态分布的，期望 什么的不理解什么含义 由于没有学概率论

2卡尔曼滤波增益的推导没掌握

3 协方差矩阵怎么用到卡尔曼滤波中理解上还是有点别扭

# 四 总结和思考

1 视频课还是要多看几遍 每看一遍有看一遍的收获

2要打好基础理解起来才能更清晰 比如学卡尔曼滤波前应该先学一下概率论 和状态空间方程的推导

3 下次应该别学习别写日志 要不然当时学习中遇到的问题，在写日志时想不起来了